# 프로세스와 스레드의 차이

## 프로세스란?

- 컴퓨터에서 연속적으로 실행되고 있는 프로그램으로 일반적으로 코드, 데이터, 힙, 스택 영역으로 이루어져있습니다.
- 코드영역은 프로그램 코드가 저장되고,
- 데이터영역은 전역 변수등이 저장되며,
- 힙 영역은 동적으로 할당된 메모리를 위한 공간이고,
- 스택 영역은 함수 실행을 위한 지역변수 등이 저장됩니다.
- ☑️ 프로세스간에는 주소공간이 분리되어 있기 때문에, 프로세스 간 통신을 위해서는 IPC라고 하는 별도의 기술을 이용해야합니다.

## 쓰레드란?

- 한 프로세스 내에서 동작하는 여러 실행의 흐름
- 프로세스가 할당받은 자원(주소 공간이나 자원)을 이용하는 실행의 단위
- 운영체제적으로는 한 프로세스 안의 스레드들은 스택(Stack)을 제외한 프로세스의 나머지 공간(Code, Data, Heap)과 시스템 자원을 공유
- 한 스레드가 프로세스 자원을 변경하면, 다른 스레드도 그 변경 결과를 즉시 반영
- ☑️하나의 프로세스 주소공간 안에서, CODE/DATA/HEAP 공간을 공유하기 때문에, 별도의 통신 기술은 필요 없습니다.

## 프로세스와 쓰레드의 차이

- 프로세스는 운영체제로부터 자원을 할당받아 실행하고, 쓰레드는 프로세스로부터 자원을 할당받아 실행합니다.
- 하나의 프로세스 안에서 쓰레드는 CODE/DATA/HEAP으로 공간을 공유하지만, 해당 쓰레드만의 스택을 가지고 동작합니다. 그래서 하나의 프로세스 안에서 생성된 쓰레드 간에는 별도의 기술을 쓰지 않고도 데이터 공유가 가능합니다.

## 언제 멀티 프로세스를 사용하고, 언제 멀티 쓰레드를 사용해야하는가?

- 멀티쓰레드의 경우 프로세스의 주소공간을 공유하고 있기 때문에, 쓰레드간의 통신을 위해 별도의 기술을 사용할 필요는 없습니다.
- 하지만 공유한 데이터를 읽고 쓰는 과정에서 동기화 이슈가 발생하며, 비정상 동작이 일어날 수 있습니다.
- 멀티 프로세스는 KPC기술을 이용해 프로세스간 통신을 해야합니다.
- 만약, 쓰레드간 공유한 데이터를 읽기만 하는 경우에는 동기화 이슈를 막기 위해 동기화 기술을 쓰지 않아도 되기 때문에, 멀티쓰레드를 사용하는 것이 좋습니다.
- 데이터를 읽고 쓰는 작업이 빈번하다면 멀티프로세스를 고려해보는 것이 좋습니다.
